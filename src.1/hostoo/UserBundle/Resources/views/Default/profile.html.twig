{% extends 'hostooSanteBundle::blank.html.twig' %}
{% block menu %}
    {% include 'hostooSanteBundle:menus:menurapport.html.twig' %}
{% endblock %}
{% block titrepage %}
    Profil utilisateur
{% endblock %}
{% block title %}
    {{ parent() }}
    Profil utilisateur
{% endblock %}
{% block options %}
    {% endblock %}
{% block body %}
    <div class="col-md-4">
    <div class="card-box">
    <table class="table table-striped" cellspacing="0" cellpadding="0" id="utilisateurs">
        <tbody>
        <tr class="">
            <th>id</th>
            <td>{{ utilisateur.id }}</td>
        </tr>
            <tr>
            <th>Nom</th>
            <td>{{ utilisateur.nom }}</td>
            </tr>
            <tr>
            <th>postnom</th>
            <td>{{ utilisateur.postnom }}</td>
            </tr>
            <tr>
                <th>Email</th>
            <td>{{ utilisateur.email }}</td>
            </tr>
            <tr>
                <th>Role</th>
            <td>{{ utilisateur.roles[0] }}</td>
            </tr>
            <tr>
                <th>Date de naissance</th>
            <td>{{ utilisateur.datenaissance|date('d-m-Y') }}</td>
            </tr>
            <tr>
                <th>service</th>
            <td>{{ utilisateur.service.nomservice }}</td>
            </tr>
            <tr>
                <th>identifiant</th>
            <td>{{ utilisateur.username }}</td>
            </tr>
            <tr>
                <th></th>
            <td><a href="{{ path('hostoo_user_edituser',{'id':utilisateur.id}) }}" class="btn btn-default"><i class="fa fa-edit"></i> </a> </td>
        </tr>

    </table>
    </div>
    </div>

     <div class="col-md-8">
    <div class="card-box">
        <div class="row">
            <form action="{{ path('profile_utilisateur',{'id': utilisateur.id }) }}" method="post">
                <select name="tridate" class="form-control">
                    {% for j in 1..12 %}
                        <option>{{ date('2019-' ~ j ~ '-01') |localizeddate('none', 'none', null, null, 'MMMM Y') }}</option>
                    {% endfor %}
                </select>
            </form>
        </div>
        <div class="table-responsive">
            <table class="table table-striped table-bordered">
                <caption>Patients Privés</caption>
                <thead>
                <tr>
                    <td>Médécins</td>
                    <td>CONSULTATION</td>
                    <td>LABO</td>
                    <td>ECHOGRAPHIE</td>
                    <td>SOINS</td>
                    <td>HOSPITALISATION</td>
                    <td>ACCOUCHEMENT</td>
                    <td>AUTRES ACTES</td>
                </tr>
                </thead>
                <tbody>
                        <tr>
                            <td><a href="{{ path('profile_utilisateur',{'id': utilisateur.id }) }}"> {{ utilisateur }} </a></td>
                            <td>{{ utilisateur.episode|length }}</td>
                            <td> {{ utilisateur.lesExamensDuLabo }}</td>
                            <td> {{ utilisateur.lesExamensEcho }}</td>
                            <td></td>
                            <td>{{ utilisateur.hospitalisations|length }}</td>
                            <td></td>
                            <td></td>
                        </tr>
                </tbody>
            </table>
        </div>
    </div>
         {% set tot,tot2=0,0 %}
         <div class="card-box">
             <h4>LABORATOIRE</h4>
             <table class="table table-striped">
                 <tr>
                     <th>Designation Acte</th>
                     <th>Nombre</th>
                 </tr>
                 {% for acte in actes %}
                 <tr>
                     <td>{{ acte.desacte }}</td>
                     <td>{{ acte.prix }}</td>{% set tot=tot+acte.prix %}
                 </tr>
                 {% endfor %}
                 <tr>
                     <th>TOTAL</th>
                     <th>{{ tot }}</th>
                 </tr>
                 <tr>
                     <th>COMISSION 30%</th>
                     <th>{{ tot*0.30 }}</th>
                 </tr>
             </table>
         </div>
         <div class="card-box">
             <h4>IMAGERIE</h4>
             <table class="table table-striped">
                 <thead>
                 <tr>
                     <th>Designation Acte</th>
                     <th>Nombre</th>
                 </tr>

                 </thead>
                 <tbody>

                 {% for acte in actesimg %}
                     <tr>
                         <td>{{ acte.desacte }}</td>
                         <td>{{ acte.prix }}</td>{% set tot2=tot2+acte.prix %}
                     </tr>
                 {% endfor %}
                 </tbody>
                 <tfoot>
                 <tr>
                     <th>TOTAL</th>
                     <th>{{ tot2 }}</th>
                 </tr>
                 <tr>
                     <th>COMISSION 30%</th>
                     <th>{{ tot2*0.30 }}</th>
                 </tr>
                 </tfoot>

             </table>
         </div>
     </div>
{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    {% include 'hostooSanteBundle:plugins:datatable.style.html.twig' %}
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    {% include 'hostooSanteBundle:plugins:datatable.scripts.html.twig' %}
    <script>
        $(function () {
            $('.table').dataTable();
        })
    </script>
{% endblock %}